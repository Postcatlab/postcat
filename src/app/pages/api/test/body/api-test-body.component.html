<div class="param_header">
  <div class="f_row_ac">
    <nz-radio-group [(ngModel)]="bodyType" (ngModelChange)="changeBodyType()">
      <label *ngFor="let item of CONST.API_BODY_TYPE" nz-radio [nzValue]="item.value">{{ item.key }}</label>
    </nz-radio-group>
    <nz-divider nzType="vertical"></nz-divider>
    <params-import
      *ngIf="['formData', 'json', 'xml'].includes(bodyType)"
      [baseData]="model"
      [contentType]="bodyType"
      (baseDataChange)="handleParamsImport($event)"
      [rootType]="jsonRootType"
    ></params-import>
  </div>
  <div *ngIf="bodyType === 'json'">
    <p class="fs12 c999 mb5">JSON 根类型：</p>
    <nz-select class="w_100 mb10" [(ngModel)]="jsonRootType">
      <nz-option *ngFor="let item of CONST.JSON_ROOT_TYPE" [nzLabel]="item.key" [nzValue]="item.value"></nz-option>
    </nz-select>
  </div>
</div>
<!-- FormData -->
<!-- JSON -->
<!-- XML -->
<eo-table
  #eoTable
  *ngIf="['formData', 'json', 'xml'].includes(bodyType)"
  [columns]="[
    { type: 'drag' },
    { type: 'selection' },
    { title: '参数名', key: 'name', isEdit: true, isExpand: true },
    {
      title: '类型',
      key: 'type',
      isSelect: true,
      options: [
        { label: 'string', value: 'string' },
        { label: 'number', value: 'number' },
        { label: 'object', value: 'object' },
        { label: 'null', value: 'null' }
      ]
    },
    { title: '参数值', key: 'value', isEdit: true },
    { title: '操作', slot: 'action', width: '15%' }
  ]"
  [addChildCallback]="addChildCallback"
  [dataModel]="itemStructure"
  [(model)]="model"
>
  <ng-template cell="action" let-scope="scope" let-index="index">
    <a nz-button nzSize="small" nzType="link" (click)="eoTable.addChild(scope)">添加子字段</a>
    <a nz-button nzSize="small" nzType="link" (click)="eoTable.deleteNode(scope)">删除</a>
  </ng-template>
</eo-table>
<div>{{ model | json }}</div>
<list-block-common-component
  *ngIf="['formData', 'json', 'xml'].includes(bodyType)"
  [mainObject]="listConf"
  [(list)]="model"
></list-block-common-component>
<!-- Raw -->
<eo-editor
  [(code)]="model"
  (codeChange)="rawDataChange()"
  *ngIf="bodyType === 'raw'"
  [eventList]="['type', 'format', 'copy', 'download', 'newTab', 'search', 'replace']"
></eo-editor>
<!-- Binary -->
<textarea
  class="btd"
  rows="4"
  *ngIf="bodyType === 'binary'"
  nzBorderless
  placeholder="参数描述"
  nz-input
  [(ngModel)]="model"
></textarea>
